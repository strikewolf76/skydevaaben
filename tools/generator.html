<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Skydevaaben Redirect Generator</title>
  <style>
    :root { color-scheme: light dark; }
    body { font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif; max-width: 1120px; margin: 24px auto; padding: 0 16px; }
    h1 { font-size: 22px; margin: 0 0 8px; }
    .muted { opacity: .8; font-size: 13px; margin: 0 0 14px; }
    .panel { border: 1px solid rgba(127,127,127,0.25); border-radius: 14px; padding: 14px; margin-top: 14px; }
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px 16px; }
    .full { grid-column: 1 / -1; }
    label { display: block; font-size: 12px; opacity: 0.85; margin-bottom: 6px; }
    input, textarea { width: 100%; box-sizing: border-box; padding: 10px 12px; border-radius: 10px; border: 1px solid rgba(127,127,127,0.35); background: transparent; }
    textarea { min-height: 100px; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
    .row { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; margin-top: 12px; }
    button { padding: 10px 14px; border-radius: 10px; border: 1px solid rgba(127,127,127,0.35); background: rgba(127,127,127,0.12); cursor: pointer; }
    button.primary { background: rgba(0, 120, 255, 0.18); }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 12px; }
    .hint { font-size: 12px; opacity: 0.8; margin-top: 6px; }
    .ok { color: #0a7; }
    .bad { color: #c33; }
    .chips { display:flex; gap:10px; flex-wrap:wrap; }
    .chip { border:1px solid rgba(127,127,127,0.25); border-radius:999px; padding:8px 10px; display:flex; gap:8px; align-items:center; }
    .chip input { width:auto; }
    .small { font-size: 12px; opacity:.9; }
    .ogpreview { display:grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    @media (max-width: 920px) { .grid, .ogpreview { grid-template-columns: 1fr; } }

    .log { display:flex; flex-direction:column; gap:10px; }
    .logitem { border:1px solid rgba(127,127,127,0.22); border-radius:14px; padding:12px; }
    .logitem .top { display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between; }
    .logitem .path { font-weight:600; }
    .logitem .meta { margin-top:8px; display:grid; gap:6px; }
    .logitem a { word-break: break-all; }
    .logitem .actions { display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; }
    .logitem .actions button { padding:8px 10px; font-size:13px; }
  </style>
</head>
<body>
  <h1>Skydevaaben – Redirect Generator</h1>
  <p class="muted">
    Output-mål: HTML → <span class="mono">tracks/&lt;slug&gt;/&lt;destination&gt;/</span> og bilde → <span class="mono">assets/og/&lt;slug&gt;.jpg</span>.
    Policy: kun bindestreker (ingen <span class="mono">_</span>).
  </p>

  <div class="panel">
    <div class="grid">
      <div>
        <label for="repoBase">Pages base URL</label>
        <input id="repoBase" value="https://strikewolf76.github.io/skydevaaben" />
        <div class="hint">Brukes til absolutte <span class="mono">og:url</span>/<span class="mono">og:image</span>.</div>
      </div>

      <div>
        <label for="siteName">og:site_name</label>
        <input id="siteName" value="Skydevaaben" />
      </div>

      <div>
        <label for="title">Title (og:title + &lt;title&gt;)</label>
        <input id="title" value="Born Again (Crimson Noise Remix)" />
      </div>

      <div>
        <label for="description">Description (og:description)</label>
        <input id="description" value="Tap to open in Spotify." />
      </div>

      <div>
        <label for="trackSlug">Track slug (mappenavn)</label>
        <input id="trackSlug" value="born-again-crimson-noise" />
      </div>

      <div>
        <label for="utmCampaign">utm_campaign</label>
        <input id="utmCampaign" value="born-again-crimson-noise" />
      </div>

      <div class="full panel">
        <div><strong>Destinations</strong></div>
        <div class="hint">Spotify kan bygges fra Track ID. Andre destinations trenger full URL.</div>

        <div class="grid" style="margin-top:10px;">
          <div class="chip">
            <input id="destSpotify" type="checkbox" checked>
            <div>
              <div><strong>Spotify</strong> <span class="small">(build from Track ID)</span></div>
              <div class="hint mono">tracks/&lt;slug&gt;/spotify/…</div>
            </div>
          </div>
          <div>
            <label for="spotifyId">Spotify track ID</label>
            <input id="spotifyId" value="1zqSLn6IuAaDGCSZGcZFj2" />
          </div>

          <div class="chip">
            <input id="destApple" type="checkbox">
            <div>
              <div><strong>Apple / iTunes</strong> <span class="small">(requires URL)</span></div>
              <div class="hint mono">tracks/&lt;slug&gt;/apple/…</div>
            </div>
          </div>
          <div>
            <label for="appleUrl">Apple URL</label>
            <input id="appleUrl" placeholder="https://music.apple.com/..." />
          </div>

          <div class="chip">
            <input id="destDeezer" type="checkbox">
            <div>
              <div><strong>Deezer</strong> <span class="small">(requires URL)</span></div>
              <div class="hint mono">tracks/&lt;slug&gt;/deezer/…</div>
            </div>
          </div>
          <div>
            <label for="deezerUrl">Deezer URL</label>
            <input id="deezerUrl" placeholder="https://www.deezer.com/..." />
          </div>
        </div>
      </div>

      <div class="full panel">
        <div><strong>Channels</strong></div>
        <div class="hint">Velg hvilke filer som skal genereres. Sett <span class="mono">utm_content</span> per kanal.</div>

        <div class="grid" style="margin-top:10px;">
          <div class="chip">
            <input id="chMeta" type="checkbox" checked>
            <div>
              <div><strong>Meta Ads</strong> <span class="small mono">utm_source=meta</span> <span class="small mono">utm_medium=paid_social</span></div>
              <div class="hint mono">meta-ads-story01.html</div>
            </div>
          </div>
          <div>
            <label for="metaContent">utm_content (Meta)</label>
            <input id="metaContent" value="meta-ads-story01" />
          </div>

          <div class="chip">
            <input id="chTikTok" type="checkbox" checked>
            <div>
              <div><strong>TikTok Ads</strong> <span class="small mono">utm_source=tiktok</span> <span class="small mono">utm_medium=paid_social</span></div>
              <div class="hint mono">tt-ads-infeed01.html</div>
            </div>
          </div>
          <div>
            <label for="ttContent">utm_content (TikTok)</label>
            <input id="ttContent" value="tt-ads-infeed01" />
          </div>

          <div class="chip">
            <input id="chYouTube" type="checkbox" checked>
            <div>
              <div><strong>YouTube Ads</strong> <span class="small mono">utm_source=youtube</span> <span class="small mono">utm_medium=paid_video</span></div>
              <div class="hint mono">yt-ads-instream01.html</div>
            </div>
          </div>
          <div>
            <label for="ytContent">utm_content (YouTube)</label>
            <input id="ytContent" value="yt-ads-instream01" />
          </div>

          <div class="chip">
            <input id="chIGDM" type="checkbox">
            <div>
              <div><strong>IG DM</strong> <span class="small mono">utm_source=instagram</span> <span class="small mono">utm_medium=dm</span></div>
              <div class="hint mono">ig-dm-v1.html</div>
            </div>
          </div>
          <div>
            <label for="igdmContent">utm_content (IG DM)</label>
            <input id="igdmContent" value="ig-dm-v1" />
          </div>
        </div>
      </div>

      <div class="full panel">
        <div class="ogpreview">
          <div>
            <div><strong>OG image upload</strong></div>
            <div class="hint">Upload et bilde. Generator lager ferdig <span class="mono">1200×630</span> JPG: <span class="mono">assets/og/&lt;slug&gt;.jpg</span></div>
            <div style="margin-top:10px;">
              <input id="ogFile" type="file" accept="image/*" />
            </div>
            <div class="hint mono" id="ogFileInfo"></div>
            <div class="row">
              <button id="btnDownloadOg">Download OG image (.jpg)</button>
            </div>
            <div class="hint">Filnavn: <span class="mono" id="ogImageNamePreview"></span></div>
          </div>

          <div>
            <div><strong>Preview (cropped to 1200×630)</strong></div>
            <div class="hint">Center-crop til 1.91:1 (FB/Messenger-standard).</div>
            <canvas id="ogCanvas" width="1200" height="630" style="width:100%;height:auto;border-radius:12px;border:1px solid rgba(127,127,127,0.2);"></canvas>
          </div>
        </div>
      </div>

      <div class="full panel">
        <div><strong>Validation</strong></div>
        <div id="validation" class="mono"></div>
      </div>
    </div>

    <div class="row">
      <button class="primary" id="btnGenerate">Generate batch</button>
      <button id="btnReset">Create new / refresh</button>
    </div>
  </div>

  <div class="panel">
    <div><strong>Created (log)</strong></div>
    <div class="hint">Hver fil: repo-path + Pages-link + Download/Copy. Upload til korrekt mappe i repoet.</div>
    <div id="log" class="log" style="margin-top:10px;"></div>
  </div>

  <script src="./generator.js"></script>
</body>
</html>
